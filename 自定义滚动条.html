<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-control" content="no-cache">
		<meta http-equiv="Cache" content="no-cache">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title></title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			
			body {
				font: 16px/1.5 'Microsoft Yahei';
			}
			
			.clearfix {
				zoom: 1;
			}
			
			.clearfix:after {
				content: '';
				display: block;
				clear: both;
			}
			
			.fl {
				float: left;
			}
			
			.fr {
				float: right;
			}
			
			#wrap {
				width: 700px;
				height: 800px;
				background: #efefef;
				margin: 50px auto;
				overflow: hidden;
				position: relative;
			}
			
			#wrap ul.content {
				width: 660px;
				padding: 10px;
				line-height: 2.5;
				position: absolute;
			}
			
			#wrap ul.content li {
				border-bottom: 1px solid #fff;
			}
			
			#wrap .scrollbar {
				position: absolute;
				right: 0;
				top: 0;
				width: 6px;
				height: 100%;
				background-color: #ccc;
				box-shadow: 0 0 6px 0 #666 inset;
				border-radius: 10px;
				border: 1px solid #888;
			}
			
			#wrap .scrollbar i {
				position: absolute;
				width: 100%;
				height: 30px;
				background: #eee;
				border-radius: 10px;
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<ul class="content">
				<li>
					<p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
					<span>生命就像一盒巧克力，结果往往出人意料。</span>
				</li>
				<li>
					<p>2、Stupid is as stupid does.</p>
					<span>蠢人做蠢事，也可理解为傻人有傻福。</span>
				</li>
				<li>
					<p>3、Miracles happen every day.</p>
					<span>奇迹每天都在发生。</span>
				</li>
				<li>
					<p>4、it made me look like a duck in water.</p>
					<span>它让我如鱼得水。</span>
				</li>
				<li>
					<p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
					<span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
				</li>
				<li>
					<p>6、Death is just a part of life, something we're all destined to do.</p>
					<span>死亡是生命的一部分，是我们注定要做的一件事。</span>
				</li>
				<li>
					<p>7、You have got to put the past behind you before you can move on.</p>
					<span>放下包袱，继续前进。</span>
				</li>
				<li>
					<p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
					<span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
				</li>
				<li>
					<p>9、If there is anything you need, I will not be far away.</p>
					<span>只要你需要，我就在这里。</span>
				</li>
				<li>
					<p>4、it made me look like a duck in water.</p>
					<span>它让我如鱼得水。</span>
				</li>
				<li>
					<p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
					<span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
				</li>
				<li>
					<p>6、Death is just a part of life, something we're all destined to do.</p>
					<span>死亡是生命的一部分，是我们注定要做的一件事。</span>
				</li>
				<li>
					<p>7、You have got to put the past behind you before you can move on.</p>
					<span>放下包袱，继续前进。</span>
				</li>
				<li>
					<p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
					<span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
				</li>
				<li>
					<p>9、If there is anything you need, I will not be far away.</p>
					<span>只要你需要，我就在这里。</span>
				</li>
				<li>
					<p>4、it made me look like a duck in water.</p>
					<span>它让我如鱼得水。</span>
				</li>
				<li>
					<p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
					<span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
				</li>
				<li>
					<p>6、Death is just a part of life, something we're all destined to do.</p>
					<span>死亡是生命的一部分，是我们注定要做的一件事。</span>
				</li>
				<li>
					<p>7、You have got to put the past behind you before you can move on.</p>
					<span>放下包袱，继续前进。</span>
				</li>
				<li>
					<p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
					<span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
				</li>
				<li>
					<p>9、If there is anything you need, I will not be far away.</p>
					<span>只要你需要，我就在这里。</span>
				</li>
				<li>
					<p>4、it made me look like a duck in water.</p>
					<span>它让我如鱼得水。</span>
				</li>
				<li>
					<p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
					<span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
				</li>
				<li>
					<p>6、Death is just a part of life, something we're all destined to do.</p>
					<span>死亡是生命的一部分，是我们注定要做的一件事。</span>
				</li>
				<li>
					<p>7、You have got to put the past behind you before you can move on.</p>
					<span>放下包袱，继续前进。</span>
				</li>
				<li>
					<p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
					<span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
				</li>
				<li>
					<p>9、If there is anything you need, I will not be far away.</p>
					<span>只要你需要，我就在这里。</span>
				</li>

			</ul>

			<div class="scrollbar">
				<i></i>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		function userDefind(dom) {
			var _this = this;
			this.init = function() {
				this.wrap = document.getElementById(dom);
				this.content = this.wrap.firstElementChild;
				this.scrollbar = this.wrap.lastElementChild;
				this.but = this.scrollbar.children[0];
				//		X/滚动条的总高度 = 内容可视高度/内容的总高度
				this.but.style.height = this.scrollbar.offsetHeight * this.wrap.offsetHeight / this.content.offsetHeight + 'px';
				this.maxContent = this.content.offsetHeight - this.scrollbar.offsetHeight; //内容的最大滚动高度
				this.maxScroll = this.scrollbar.clientHeight - this.but.offsetHeight; //滚动条的最大滚动高度

				this.scrollbar.onclick = function(e) {
					e = e || window.event;
					var initY = e.clientY - _this.wrap.offsetTop;
					var currentScroll = Math.max(Math.min(initY - _this.but.offsetHeight / 2, _this.maxScroll), 0);
					//				X/内容总的滚动高度 = 滑块的当前滚动高度/滚动条的最大滚动高度 
					//				内容的滚动高度
					var contentProp = currentScroll / _this.maxScroll * _this.maxContent;
					_this.content.style.top = -contentProp + 'px';
					_this.but.style.top = currentScroll + 'px';
				};

				this.but.onmousedown = function(e) {
					e = e || window.event;
					var initY = e.clientY,
						initT = _this.but.offsetTop;
					document.onmousemove = function(e) {
						e = e || window.event;
						var movey = e.clientY - initY;
						var currentScroll = Math.min(Math.max(initT + movey, 0), _this.maxScroll); //滑块的当前滚动高度
						//				X/内容总的滚动高度 = 滑块的当前滚动高度/滚动条的最大滚动高度 
						//				内容的滚动高度
						var contentProp = currentScroll / _this.maxScroll * _this.maxContent;
						_this.style(-contentProp, currentScroll);
					}
					document.onmouseup = function() {
						document.onmousemove = null;
						document.onmouseup = null;
					}
					return false;
				};
				this.style = function(a, b) {
					_this.content.style.top = a + 'px';
					_this.but.style.top = b + 'px';
				}

				this.wheel = function(e) {
					//内容的滚动高度
					var value = e.wheelCode / 5 + _this.content.offsetTop;
					value = Math.max(Math.min(value, 0), -_this.maxContent); //内容总的滚动高度
					//				内容的滚动高度/内容总的滚动高度 = X/滚动条的最大滚动高度 
					//				内容的滚动高度
					var currentScroll = Math.abs(value) / _this.maxContent * _this.maxScroll;
					_this.style(value, currentScroll);
				};
				this.on(this.content, 'mousewheel', this.wheel, false);
			}
			this.init();
		}

		userDefind.prototype.on = function(dom, type, fn, boolen) {
			//封装on方法
			/*
			 * dom  节点
			 * type  事件
			 * fn   回调函数
			 * boolen  捕获，冒泡
			 */
			if(type == 'mousewheel') {
				dom[type] = handle; //把函数变成this的方法
			} else {
				dom[type] = human; //把函数变成this的方法
			}

			boolen = boolen || false;
			dom.addEventListener ? dom.addEventListener(type, dom[type], boolen) : dom.attachEvent('on' + type, dom[type], boolen);
			if(type == 'mousewheel') {
				//mousewheel兼容火狐
				dom.addEventListener ? dom.addEventListener('DOMMouseScroll', dom[type], boolen) : ''
			}
			//IE8以下不支持bind()方法，而用call会立即执行，所以必须写在另外一个函数里面
			function handle(e) {
				e = e || window.event;
				e.wheelCode = e && e.wheelDelta ? e.wheelDelta : -e.detail * 40;
				fn.call(this, e);
			}

			function human(e) {
				e = e || window.event;
				fn.call(this, e);
			}
		};
		userDefind.prototype.off = function(dom,type, fn, boolen) {
			boolen = boolen || false;
			dom.removeEventListener ? dom.removeEventListener(type, dom[type], boolen) : dom.detachEvents('on' + type, dom[type], boolen);
			if(type == 'mousewheel') {
				dom.removeEventListener ? dom.removeEventListener('DOMMouseScroll', dom[type], boolen) : '';
			}
			dom[type] = null;
		}
		var app = new userDefind('wrap');
	</script>

</html>